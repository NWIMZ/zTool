<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>url与JSON相互转换</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/public.css" />
    <style>
        .main {
            padding-top: 200px;
        }

        .right {
            text-align: center
        }
    </style>
</head>

<body>
    <h2>json按key排序</h2>
    <div class="main">
        <div class="left">
            <textarea autofocus name="json" id="json" cols="120" rows="20"></textarea>
        </div>
    </div>

    <script>


        var oJson = document.querySelector("#json");

        oJson.addEventListener("keyup",function(event){
            if(event.keyCode==13){

                var inputStr = this.value;
                var arr = inputStr.split("\n");

                var temp = [];
                for(var i=0;i<arr.length;i++){
                    temp.push(arr[i].trim());
                }
                var sorted = bubbleSort(temp);
                var str = sorted.join("\n");
                oJson.value = str;
            }

        })

        /*输出*/
        function foramtJsonString(json){

            var str = "";
            for(var a in json){
                str += a + ": " + json[a] + ",\n";
            }
            str = "{\n" + str + "\n}";
            return str;
        }
        

        /**
         * 将string转成json
         */
        var reg = /\s+/g;// 匹配字符串
        function string2JSON(string) {
            var r = string.replace(reg, "");
            return JSON.parse(r);
        }

        /** 
         * 冒泡排序
         */
        function bubbleSort(arr){
            for (var i = 0; i < arr.length - 1; i++) {
                for (var j = i + 1; j < arr.length; j++) {
                    if (arr[i] > arr[j]) {//如果前面的数据比后面的大就交换  
                        var temp = arr[i];
                        arr[i] = arr[j];
                        arr[j] = temp;
                    }
                    //console.log("第" + (++times) + "次排序后：" + arr);
                }
            }
            var result = [];
            for(var a in arr){
                result.push(arr[a]);
            }
            return result;
        }
    </script>
</body>

</html>